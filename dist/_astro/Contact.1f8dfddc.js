import{a as f,w as U}from"./runtime-dom.esm-bundler.83a7702c.js";import{t as g}from"./translate.44434bcc.js";import{s as x}from"./store.ac37cfed.js";import{u as j,L as q}from"./Loading.617f30db.js";import{a as z}from"./index.1dca32fc.js";/* empty css                        */import{l as _}from"./index.a61567a3.js";import{e as H}from"./popper.esm.86f34fb3.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import{u as L}from"./index.1a895777.js";import{i as M,r as i,f as k,w as N,a as p,c as u,b as t,t as n,d as G,l as A,h as B,e as K,j as w,F as Q,m as R,n as W,p as X,k as Y}from"./runtime-core.esm-bundler.10e5df62.js";import"./index.d9178191.js";const Z={__name:"Contact",props:{contact:{type:Object}},setup(c,{expose:a}){a();const l=c,e=L(x),s=M({email:"",name:"",message:"",phone:""}),{textarea:S,input:o}=z(),m={email:[{type:"email",required:!0}],name:[{type:"string",required:!0}],message:[{type:"string",min:10,required:!0}]},{pass:b,isFinished:C,errorFields:E}=j(s,m),d=i(null),F=i(!1),h=i(!1),y=i(null),v=i(null),P=()=>{x.set({type:e.value.type,slug:e.value.slug,show:!1})},V=r=>{d.value=r.label,v.value=r.email,y.value=r.slack_id};l.contact.topics.length===1&&V(l.contact.topics[0]);const I=k(()=>!h.value&&C.value&&b.value&&!!d.value),T=k(()=>({email:s.email,name:s.name,topicChannel:y.value,topicEmail:v.value,message:`
Topic:  ${d.value}\r

Name: ${s.name}\r

Phone: ${s.phone}\r

Email: ${s.email}\r

Message: ${s.message}\r
            `})),O=()=>{h.value=!0,l.contact.provider&&fetch(`/api/contact-${l.contact.provider}`,{method:"POST",body:JSON.stringify(T.value),headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{r.status==="ok"?(_.success(g("contact_thanks")),s.email="",s.name="",s.phone="",s.message="",o.value="",P()):_.error(g("contact_error"))}).catch(r=>{console.log("error",r),_.error(g("contact_error"))}).finally(()=>{h.value=!1})};N(o,r=>{s.message=r},{immediate:!1});const D={props:l,$showDialog:e,form:s,textarea:S,input:o,rules:m,pass:b,isFinished:C,errorFields:E,topic:d,showPopper:F,loading:h,topicChannel:y,topicEmail:v,hide:P,setTopic:V,canSubmit:I,mailData:T,submit:O,ref:i,watch:N,reactive:M,computed:k,get t(){return g},get useStore(){return L},get showDialog(){return x},get useAsyncValidator(){return j},get useTextareaAutosize(){return z},Loading:q,get toast(){return _},get Popper(){return H}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},$=c=>(X("data-v-d93bb0aa"),c=c(),Y(),c),ee=["onSubmit"],te={class:"pb-8"},oe={class:"subtitle"},se={key:0,class:"input-group z-20 w-full"},ae=["onClick"],re={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},le={class:"input-group"},ne={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},ce={class:"input-group"},ie={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},pe={class:"input-group"},ue={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},me={class:"input-group"},de={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},he={class:"pointer-events-none sticky bottom-0 right-5 flex justify-end md:translate-y-10"},fe=["disabled"],ge={class:"-mr-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",style:{"enable-background":"new 0 0 12 12"},viewBox:"0 0 12 12"},_e=$(()=>t("g",{class:"-translate-x-[20%] transition-transform duration-300 group-hover:translate-x-0"},[t("path",{d:"M9.2 6.4 6.4 9.1c-.1.1-.1.4 0 .5s.4.1.5 0l3.4-3.4c.1-.1.1-.4 0-.5L7 2.4c-.1-.1-.4-.1-.5 0-.1.1-.1.4 0 .5l2.7 2.7c.4.4.4.4 0 .8z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"}),t("g",null,[t("path",{class:"origin-right -translate-x-[8%] scale-x-0 transition-transform duration-300 group-hover:scale-x-75",d:"M9.6 5.6H1.9c-.2 0-.3.2-.3.4s.2.4.4.4h7.7c.2 0 .4-.2.4-.4s-.3-.4-.5-.4z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"})])],-1)),we=[_e];function be(c,a,l,e,s,S){return p(),u("form",{onSubmit:U(e.submit,["prevent"]),class:"grid gap-4"},[t("div",te,[t("h2",oe,n(l.contact?.title),1),G(c.$slots,"text",{},void 0,!0)]),l.contact.topics.length>1?(p(),u("div",se,[A(e.Popper,{placement:"bottom-start",offsetDistance:"1",show:e.showPopper,class:"w-full"},{content:B(()=>[t("ul",null,[(p(!0),u(Q,null,R(l.contact.topics,(o,m)=>(p(),u("li",{key:m,class:W(e.topic==o.label?"bg-dark bg-opacity-10":"")},[t("button",{type:"button",class:"w-full p-2 text-left hover:bg-dark hover:bg-opacity-10",onClick:b=>{e.setTopic(o),e.showPopper=!1}},n(o.label),9,ae)],2))),128))])]),default:B(()=>[t("button",{type:"button",onClick:a[0]||(a[0]=o=>e.showPopper=!e.showPopper),class:"select w-full text-left"},n(e.topic?e.topic:"Select"),1)]),_:1},8,["show"]),t("label",re,n(e.t("topic"))+" *",1)])):K("",!0),t("div",le,[w(t("input",{type:"text",name:"name",placeholder:" ",class:"peer","onUpdate:modelValue":a[1]||(a[1]=o=>e.form.name=o)},null,512),[[f,e.form.name]]),t("label",ne,n(e.t("name"))+" *",1)]),t("div",ce,[w(t("input",{type:"email",name:"email",placeholder:" ",class:"peer","onUpdate:modelValue":a[2]||(a[2]=o=>e.form.email=o)},null,512),[[f,e.form.email]]),t("label",ie,n(e.t("email"))+" *",1)]),t("div",pe,[w(t("input",{type:"text",name:"phone",placeholder:" ",class:"peer","onUpdate:modelValue":a[3]||(a[3]=o=>e.form.phone=o)},null,512),[[f,e.form.phone]]),t("label",ue,n(e.t("phone")),1)]),t("div",me,[w(t("textarea",{class:"hide-scrollbar peer",name:"message",id:"",placeholder:" ",cols:"30",rows:"2",ref:"textarea","onUpdate:modelValue":a[4]||(a[4]=o=>e.input=o)},null,512),[[f,e.input]]),t("label",de,n(e.t("message"))+" *",1)]),t("div",he,[t("button",{class:"btn surface-primary group pointer-events-auto mb-auto ml-auto",type:"submit",disabled:!e.canSubmit},[t("span",null,n(e.t("submit")),1),(p(),u("svg",ge,we))],8,fe)]),A(e.Loading,{loading:e.loading},null,8,["loading"])],40,ee)}const Le=J(Z,[["render",be],["__scopeId","data-v-d93bb0aa"]]);export{Le as default};
