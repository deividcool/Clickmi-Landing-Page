import{a as b,b as B,w as L}from"./runtime-dom.esm-bundler.83a7702c.js";import{t as l}from"./translate.44434bcc.js";import{s as h}from"./store.ac37cfed.js";import{u as C,L as O}from"./Loading.617f30db.js";/* empty css                        */import{l as c}from"./index.a61567a3.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import{u as N}from"./index.1a895777.js";import{i as V,r as _,f as w,a as g,c as y,b as t,t as n,d as z,j as u,e as T,l as A,w as F}from"./runtime-core.esm-bundler.10e5df62.js";import"./index.d9178191.js";const P={__name:"Newsletter",props:{data:{type:Object},provider:{type:String,default:"mailchimp"}},setup(p,{expose:a}){a();const o=N(h),e=p,s=V({email:"",name:""}),m={email:[{type:"email",required:!0}]},{pass:r,isFinished:v,errorFields:j}=C(s,m),D=l("subscribe"),x=_(!1),d=_(!1),f=()=>{h.set({type:o.value.type,slug:o.value.slug,show:!1})},M=w(()=>!d.value&&v.value&&r.value),k=w(()=>({email:s.email,first_name:s.name,last_name:s.last_name,type:o.value.type,tags:e.data.tags,list:e.data.id,include_main_list:x.value,status:e.data.status})),S={$showDialog:o,props:e,form:s,rules:m,pass:r,isFinished:v,errorFields:j,label:D,subscribeNewsletter:x,loading:d,hide:f,canSubmit:M,formData:k,submit:()=>{e.provider==="mailchimp"&&(d.value=!0,fetch("/api/subscribe-mailchimp",{method:"POST",body:JSON.stringify(k.value),headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{i.status==="pending"?(c.success(e.data?.thanks?e.data.thanks:l("newsletter_thanks")),f(),s.email="",s.name="",s.last_name=""):i.status==="subscribed"?(c.info(e.data?.thanks?e.data.thanks:l("newsletter_already_subscribed")),f(),s.email="",s.name="",s.last_name=""):c.error(l("newsletter_error"))}).catch(i=>{c.error(l("newsletter_error"))}).finally(()=>{d.value=!1}))},ref:_,watch:F,reactive:V,computed:w,get t(){return l},get useStore(){return N},get showDialog(){return h},get useAsyncValidator(){return C},Loading:O,get toast(){return c}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},q=["onSubmit"],E={class:"pb-8"},H={class:"subtitle balance"},J={class:"input-group"},G={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},I={class:"input-group"},K={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},Q={class:"input-group"},R={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},W={class:"flex w-full justify-between gap-4"},X={key:0,class:"inline-flex items-center"},Y={class:"relative -ml-4 flex cursor-pointer items-center rounded-full p-3",for:"terms-and-conditions","data-ripple-dark":"true"},Z=t("div",{class:"pointer-events-none absolute left-2/4 top-2/4 -translate-x-2/4 -translate-y-2/4 text-white opacity-0 transition-opacity peer-checked:opacity-100"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),$={class:"mt-px cursor-pointer select-none text-xs",for:"terms-and-conditions"},ee={class:"flex justify-end"},te=["disabled"],se={class:"-mr-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",style:{"enable-background":"new 0 0 12 12"},viewBox:"0 0 12 12"},ae=t("g",{class:"-translate-x-[20%] transition-transform duration-300 group-hover:translate-x-0"},[t("path",{d:"M9.2 6.4 6.4 9.1c-.1.1-.1.4 0 .5s.4.1.5 0l3.4-3.4c.1-.1.1-.4 0-.5L7 2.4c-.1-.1-.4-.1-.5 0-.1.1-.1.4 0 .5l2.7 2.7c.4.4.4.4 0 .8z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"}),t("g",null,[t("path",{class:"origin-right -translate-x-[8%] scale-x-0 transition-transform duration-300 group-hover:scale-x-75",d:"M9.6 5.6H1.9c-.2 0-.3.2-.3.4s.2.4.4.4h7.7c.2 0 .4-.2.4-.4s-.3-.4-.5-.4z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"})])],-1),re=[ae];function oe(p,a,o,e,s,m){return g(),y("form",{onSubmit:L(e.submit,["prevent"]),class:"grid gap-4"},[t("div",E,[t("h2",H,n(o.data?.title),1),z(p.$slots,"content")]),t("div",J,[u(t("input",{type:"text",name:"name",placeholder:" ",class:"peer","onUpdate:modelValue":a[0]||(a[0]=r=>e.form.name=r)},null,512),[[b,e.form.name]]),t("label",G,n(e.t("name"))+" *",1)]),t("div",I,[u(t("input",{type:"text",name:"last_name",placeholder:" ",class:"peer","onUpdate:modelValue":a[1]||(a[1]=r=>e.form.last_name=r)},null,512),[[b,e.form.last_name]]),t("label",K,n(e.t("last_name"))+" *",1)]),t("div",Q,[u(t("input",{type:"email",name:"email",placeholder:" ",class:"peer","onUpdate:modelValue":a[2]||(a[2]=r=>e.form.email=r)},null,512),[[b,e.form.email]]),t("label",R,n(e.t("email"))+" *",1)]),t("div",W,[t("div",null,[o.data.include_main_list&&o.data.id?(g(),y("div",X,[t("label",Y,[u(t("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>e.subscribeNewsletter=r),id:"terms-and-conditions",type:"checkbox",class:"before:content[''] border-blue-gray-800 before:bg-blue-gray-500 peer relative h-5 w-5 cursor-pointer appearance-none rounded-md border-2 transition-all before:absolute before:left-2/4 before:top-2/4 before:block before:h-12 before:w-12 before:-translate-x-2/4 before:-translate-y-2/4 before:rounded-full before:opacity-0 before:transition-opacity checked:border-primary checked:bg-primary checked:before:bg-primary hover:before:opacity-10"},null,512),[[B,e.subscribeNewsletter]]),Z]),t("label",$,n(e.t("subscribe_to_newsletter")),1)])):T("",!0)]),t("div",ee,[t("button",{class:"btn surface-primary group mb-auto ml-auto",type:"submit",disabled:!e.canSubmit},[t("span",null,n(e.t(e.label)),1),(g(),y("svg",se,re))],8,te)])]),A(e.Loading,{loading:e.loading},null,8,["loading"])],40,q)}const _e=U(P,[["render",oe]]);export{_e as default};
